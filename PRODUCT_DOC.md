# 智能文件助手 (Smart File Assistant) - 产品文档

## 1. 产品概述 (Product Overview)

### 1.1 背景
在日常工作中，用户经常需要处理各种文件操作（如批量重命名、数据格式转换、日志分析、Excel 数据提取等）。这些任务往往可以通过编写简短的脚本（Python/Node.js）来完成，但对于非技术用户或希望提高效率的开发者来说，手动编写代码耗时且门槛较高。

### 1.2 目标
开发一款基于大语言模型（LLM）的智能工具，允许用户通过自然语言描述需求，系统自动生成相应的代码并在本地安全环境中执行，从而帮助用户高效地完成文件处理任务。

### 1.3 核心价值
*   **低门槛**：无需编程知识，自然语言即可驱动复杂操作。
*   **高效率**：秒级生成代码并执行，替代重复性手工劳动。
*   **自动化**：自动识别文件类型并匹配最佳处理方案。

---

## 2. 功能特性 (Features)

### 2.1 核心功能
1.  **自然语言交互 (Natural Language Interface)**
    *   支持用户输入文本指令（例如：“把这个文件夹下所有的 .jpg 图片转换为 .png 格式”）。
    *   支持多轮对话，修正需求或补充信息。

2.  **智能代码生成 (Intelligent Code Generation)**
    *   基于 LLM 分析用户意图。
    *   生成可执行的脚本代码（主要支持 Python 或 Node.js）。
    *   自动处理依赖库的引用。

3.  **自动化文件处理 (File Processing Automation)**
    *   **读取**：支持文本、表格（Excel/CSV）、图片、PDF 等多种格式。
    *   **操作**：重命名、移动、复制、删除、内容提取、格式转换、数据清洗。
    *   **写入**：生成新的文件或修改现有文件。

4.  **安全执行沙箱 (Safe Execution Sandbox)**
    *   代码在受控环境中运行，防止误删除关键系统文件。
    *   执行前提供“操作预览”或“风险提示”（可选配置）。

5.  **执行反馈与结果展示**
    *   实时显示代码执行日志。
    *   操作完成后直接展示处理结果或输出文件的路径。

---

## 3. 用户使用流程 (User Flow)

1.  **输入需求**：用户在界面输入框中描述任务，例如 “合并当前目录下所有的 Excel 表格”。
2.  **意图解析与生成**：系统分析需求，生成对应的 Python/Node.js 代码脚本。
3.  **代码预览与确认** (可选)：
    *   系统展示生成的代码逻辑。
    *   用户点击“执行”或系统自动执行（取决于设置）。
4.  **交互式确认** (如有必要)：
    *   如果代码包含敏感操作（如删除文件）或需要用户输入，系统会弹出对话框。
    *   用户在弹窗中确认或输入信息。
5.  **任务执行**：
    *   系统调用本地运行环境执行脚本。
    *   对目标文件进行实际操作。
6.  **结果反馈**：系统提示“执行成功”，并展示生成的文件或修改记录。

---

## 4. 技术架构 (Technical Architecture)

### 4.1 技术栈 (建议)
*   **前端**：React / Vue (用于构建交互界面，如果是浏览器插件则使用 Web 技术栈)。
*   **后端/核心逻辑**：
    *   **LLM 接口**：OpenAI / Claude / Gemini API (用于代码生成)。
    *   **运行时**：Node.js 或 Python Runtime (用于执行生成的代码)。
*   **文件系统接口**：Node.js `fs` 模块或 Python `os`/`shutil` 库。

### 4.2 模块划分
*   **Prompt Engineering Module**：负责将用户需求转化为高质量的代码生成 Prompt。
*   **Code Execution Engine**：负责安全地运行生成的代码并捕获输出/错误。
*   **File System Manager**：提供统一的文件操作 API 供生成的代码调用（或直接赋予代码文件系统权限）。

---

## 5. 待办事项与路线图 (Roadmap)
*   [ ] **Phase 1: 原型验证**
    *   实现基本的“提问 -> 生成 Python 脚本 -> 本地执行”流程。
    *   支持简单的文件重命名和文本读取任务。
*   [ ] **Phase 2: 核心功能增强**
    *   增加对 Excel、CSV、PDF 等常见办公文档的支持。
    *   引入代码执行的安全检查机制。
*   [ ] **Phase 3: 界面与交互优化**
    *   开发可视化界面。
    *   支持文件拖拽输入。
